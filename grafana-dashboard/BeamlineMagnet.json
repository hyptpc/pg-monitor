{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"canDelete":false,"slug":"beamline-magnet","url":"/d/eekj3erk992wwa/beamline-magnet","expires":"0001-01-01T00:00:00Z","created":"2025-05-01T11:21:26+09:00","updated":"2025-08-18T11:37:59+09:00","updatedBy":"oper","createdBy":"admin","version":10,"hasAcl":false,"isFolder":false,"apiVersion":"v0alpha1","folderId":2,"folderUid":"aeiv1lxk3wagwf","folderTitle":"e72","folderUrl":"/dashboards/f/aeiv1lxk3wagwf/e72","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":false,"canEdit":false,"canDelete":false},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":8,"links":[],"panels":[{"datasource":{"type":"grafana-postgresql-datasource","uid":"deiuvse1meygwe"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":10,"w":12,"x":0,"y":0},"id":3,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.0.2","targets":[{"datasource":{"type":"grafana-postgresql-datasource","uid":"deiuvse1meygwe"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT\n  timestamp,\n  (magnet_data-\u003e'${magnetchannel}'-\u003e\u003e'cset')::float AS ${magnetchannel}_cset\nFROM magnet\nWHERE $__timeFilter(timestamp)\nORDER BY timestamp;\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}],"title":"","type":"timeseries"},{"datasource":{"type":"grafana-postgresql-datasource","uid":"deiuvse1meygwe"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"color-text"},"inspect":false,"minWidth":50},"mappings":[{"options":{"neg":{"color":"blue","index":0,"text":"NEG"},"pos":{"color":"red","index":1,"text":"POS"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"text"}]},"unit":"A"},"overrides":[]},"gridPos":{"h":22,"w":12,"x":12,"y":0},"id":2,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"12.0.2","targets":[{"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT\n  latest.timestamp,\n  m.key        AS name,\n  (m.value-\u003e\u003e'cset')::float AS cset,\n  (m.value-\u003e\u003e'cmon')::float AS cmon,\n  m.value-\u003e\u003e'pol'           AS pol\nFROM (\n  SELECT * FROM magnet\n  ORDER BY timestamp DESC\n  LIMIT 1\n) AS latest,\nLATERAL jsonb_each(latest.magnet_data) AS m(key, value)\nORDER BY\n  CASE m.key\n    WHEN 'AK11D1'   THEN 1\n    WHEN 'AK18D1'   THEN 2\n    WHEN 'AH18'     THEN 3\n    WHEN 'BSM1'     THEN 4\n    WHEN 'K18Q1'    THEN 5\n    WHEN 'K18Q2'    THEN 6\n    WHEN 'K18D2'    THEN 7\n    WHEN 'K18Q3'    THEN 8\n    WHEN 'K18O1'    THEN 9\n    WHEN 'K18Q4'    THEN 10\n    WHEN 'K18S1'    THEN 11\n    WHEN 'K18CM1'   THEN 12\n    WHEN 'K18CM2'   THEN 13\n    WHEN 'K18S2'    THEN 14\n    WHEN 'K18Q5'    THEN 15\n    WHEN 'K18Q6'    THEN 16\n    WHEN 'K18D3'    THEN 17\n    WHEN 'K18BRS3'  THEN 18\n    WHEN 'K18BRQ7'  THEN 19\n    WHEN 'K18BRD4'  THEN 20\n    WHEN 'K18BRQ8'  THEN 21\n    WHEN 'K18BRD5'  THEN 22\n    WHEN 'DORA'     THEN 23\n    ELSE 999\n  END;","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}],"title":"","type":"table"},{"datasource":{"type":"grafana-postgresql-datasource","uid":"deiuvse1meygwe"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":0,"y":10},"id":1,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.0.2","targets":[{"datasource":{"type":"grafana-postgresql-datasource","uid":"deiuvse1meygwe"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT\n  timestamp,\n  (magnet_data-\u003e'${magnetchannel}'-\u003e\u003e'cmon')::float AS ${magnetchannel}_cmon\nFROM magnet\nWHERE $__timeFilter(timestamp)\nORDER BY timestamp;\n","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}],"title":"","type":"timeseries"}],"preload":false,"schemaVersion":41,"tags":[],"templating":{"list":[{"current":{"text":"K18BRQ7","value":"K18BRQ7"},"definition":"SELECT DISTINCT jsonb_object_keys(magnet_data) FROM magnet;","description":"","name":"magnetchannel","options":[],"query":"SELECT DISTINCT jsonb_object_keys(magnet_data) FROM magnet;","refresh":1,"regex":"","sort":1,"type":"query"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"browser","title":"Beamline Magnet","uid":"eekj3erk992wwa","version":10}}
